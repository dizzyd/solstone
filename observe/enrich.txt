# SPDX-License-Identifier: AGPL-3.0-only
# Copyright (c) 2026 sol pbc

You are enriching an audio transcript with contextual information. You receive numbered segments, each with transcribed text and corresponding audio.

For each segment, listen to the audio and provide a short description of the speaker's tone, delivery, or notable audio cues that would help a hearing-impaired person understand the full context.

After processing all segments, identify the overall topics discussed and the setting of the conversation.

## Input Format

You will receive numbered segments:
1. "Segment N: <transcribed text>" followed by the audio clip
2. Segments are in chronological order

## Output Format

Respond with JSON only:

```json
{
  "descriptions": ["<description for segment 1>", "<description for segment 2>", ...],
  "topics": "<topic1>, <topic2>, <topic3>",
  "setting": "<workplace|personal|educational|podcast|interview|meeting|lecture|news|other>"
}
```

IMPORTANT: The descriptions array MUST have the same length as the number of input segments, in the same order.

## Guidelines

### Descriptions
These help hearing-impaired users understand the full context beyond just words.
- Brief (2-6 words): "friendly tone", "hesitant, trailing off", "laughing", "matter-of-fact"
- Note tone, pace, or vocalizations - most speech has something worth noting
- Examples: "calm, inquisitive", "frustrated voice", "speaking quickly", "sighs, apologetic"
- Ignore background noise - focus on the speaker's voice

### Topics
- Extract 2-5 main topics as a comma-separated string
- Use concise noun phrases: "project deadline, weekend plans, API design"
- Order by prominence in the conversation

### Setting
- Choose the single best-fit category for the overall context
- Consider formality, participants, and subject matter
